!function(e){var t={};function n(s){if(t[s])return t[s].exports;var a=t[s]={i:s,l:!1,exports:{}};return e[s].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(s,a,function(t){return e[t]}.bind(null,a));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);n(1);var s={sizes:{width:32,height:32},pen:{width:1,colors:{current:"#000000",second:"#ffffff"}},screens:{},fps:1};function a(e,t,n,s,a,i){const o=a.getContext("2d");let c=Math.abs(n-e),r=Math.abs(s-t),l=e<n?1:-1,d=t<s?1:-1,u=c-r;for(o.fillRect(n,s,i,i),o.fill();e!=n||t!=s;){o.fillRect(e,t,i,i);let n=2*u;n>-r&&(u-=r,e+=l),n<c&&(u+=c,t+=d)}}function i(e,t){const n=e.getContext("2d"),a=t.getContext("2d"),i=s.sizes.width,o=n.getImageData(0,0,i,i);a.putImageData(o,0,0)}function o(e){const t=s.screens.mainCanvas,n=t.getContext("2d"),o=s.pen.colors.current,c=t.offsetWidth,r=s.sizes.width,l=s.pen.width;let d=Math.floor(e.offsetX/c*r),u=Math.floor(e.offsetY/c*r);n.fillStyle=o,n.fillRect(d,u,l,l),t.onmousemove=e=>{const n=Math.floor(e.offsetX/c*r),s=Math.floor(e.offsetY/c*r);a(d,u,n,s,t,l),d=n,u=s},t.onmouseup=()=>{e.target.onmousemove=null,i(s.screens.mainCanvas,s.currentFrame.children[0])},t.onmouseout=()=>{e.target.onmousemove=null}}function c(e){const t=[];for(let n=0;n<e.length;n+=4){const s=[e[n],e[n+1],e[n+2],e[n+3]];t.push(s)}return t}function r(e,t){return t[0]==e[0]&&t[1]==e[1]&&t[2]==e[2]&&t[3]==e[3]}function l(e,t,n,s){const a=e%n,i=Math.floor(e/n);t.fillStyle=s,t.fillRect(a,i,1,1)}function d(){const e=s.screens.mainCanvas,t=e.getContext("2d"),n=s.pen.colors.current,a=e.offsetWidth,o=s.sizes.width,d=Math.floor(event.offsetX/a*o),u=Math.floor(event.offsetY/a*o),m=[[d,u]];let p=c(t.getImageData(0,0,o,o).data);const f=p[u*o+d];for(;m.length;){let e,s,a=m.pop(),i=a[0],d=a[1],u=d*o+i;for(;d-- >=0&&r(f,p[u]);)u-=o;for(u+=o,d++,s=!1,e=!1;d++<+o-1&&r(f,p[u]);)l(u,t,o,n),p=c(t.getImageData(0,0,o,o).data),i>0&&(r(f,p[u-1])?s||(m.push([i-1,d]),s=!0):s&&(s=!1)),i<o-1&&(r(f,p[u+1])?e||(m.push([i+1,d]),e=!0):e&&(e=!1)),u+4<p.length&&(u+=o)}i(s.screens.mainCanvas,s.currentFrame.children[0])}function u(){const e=s.screens.mainCanvas,t=e.getContext("2d"),n=e.offsetWidth,a=s.sizes.width,o=s.pen.width;let c=Math.floor(event.offsetX/n*a),r=Math.floor(event.offsetY/n*a);t.clearRect(c,r,o,o),e.onmousemove=e=>{const s=Math.floor(e.offsetX/n*a),i=Math.floor(e.offsetY/n*a);t.clearRect(s,i,o,o)},e.onmouseup=()=>{event.target.onmousemove=null,i(s.screens.mainCanvas,s.currentFrame.children[0])},e.onmouseout=()=>{event.target.onmousemove=null}}function m(){const e=s.screens.mainCanvas,t=e.getContext("2d"),n=e.offsetWidth,a=s.sizes.width,i=Math.floor(event.offsetX/n*a),o=Math.floor(event.offsetY/n*a),r=function(e){let t=parseInt(e[0],10).toString(16),n=parseInt(e[1],10).toString(16),s=parseInt(e[2],10).toString(16),a=parseInt(e[3],10).toString(16);return t=1==t.length?"0"+t:t,n=1==n.length?"0"+n:n,s=1==s.length?"0"+s:s,a=1==a.length?"0"+a:a,"#"+t+n+s}(c(t.getImageData(0,0,a,a).data)[o*a+i]);document.querySelector(".current_color").value=r,s.pen.colors.current=r}function p(){const e=s.screens.mainCanvas,t=e.getContext("2d"),n=s.pen.colors.current,a=e.offsetWidth,o=s.sizes.width,d=Math.floor(event.offsetX/a*o),u=Math.floor(event.offsetY/a*o),m=c(t.getImageData(0,0,o,o).data),p=m[u*o+d];m.forEach((e,s)=>{r(p,e)&&l(s,t,o,n)}),i(s.screens.mainCanvas,s.currentFrame.children[0])}function f(){const e=s.screens.mainCanvas,t=e.getContext("2d"),n=s.pen.colors.current,o=e.offsetWidth,c=s.sizes.width,r=s.pen.width,l=Math.floor(event.offsetX/o*c),d=Math.floor(event.offsetY/o*c);let u=l,m=d;t.fillStyle=n,t.strokeStyle=n,t.lineWidth=r,t.fillRect(l,d,r,r),e.onmousemove=e=>{u=Math.floor(e.offsetX/o*c),m=Math.floor(e.offsetY/o*c),t.clearRect(0,0,c,c),t.beginPath(),t.moveTo(l,d),t.lineTo(u,m),t.stroke()},e.onmouseup=()=>{t.clearRect(0,0,c,c),a(l,d,u,m,e,r),event.target.onmousemove=null,i(s.screens.mainCanvas,s.currentFrame.children[0])},e.onmouseout=()=>{event.target.onmousemove=null}}function v(){s.screens.mainCanvas.removeEventListener("mousedown",o),s.screens.mainCanvas.removeEventListener("click",d),s.screens.mainCanvas.removeEventListener("mousedown",u),s.screens.mainCanvas.removeEventListener("click",m),s.screens.mainCanvas.removeEventListener("click",p),s.screens.mainCanvas.removeEventListener("mousedown",f)}var h={0:{icon:"/piskel/source/components/tools/icons/pen.svg",description:"Pen",utils:()=>{v(),s.screens.mainCanvas.addEventListener("mousedown",o)}},1:{icon:"/piskel/source/components/tools/icons/eraser.svg",description:"Eraser",utils:()=>{v(),s.screens.mainCanvas.addEventListener("mousedown",u)}},2:{icon:"/piskel/source/components/tools/icons/bucket.svg",description:"Bucket",utils:()=>{v(),s.screens.mainCanvas.addEventListener("click",d)}},3:{icon:"/piskel/source/components/tools/icons/paint_roller.svg",description:"Paint same color",utils:()=>{v(),s.screens.mainCanvas.addEventListener("click",p)}},4:{icon:"/piskel/source/components/tools/icons/stroke.svg",description:"Stroke",utils:()=>{v(),s.screens.mainCanvas.addEventListener("mousedown",f)}},5:{icon:"/piskel/source/components/tools/icons/pipette.svg",description:"Pipette",utils:()=>{v(),s.screens.mainCanvas.addEventListener("click",m)}},6:{icon:"/piskel/source/components/tools/icons/trash.svg",description:"Trash",utils:()=>{!function(){const e=s.screens.mainCanvas.getContext("2d"),t=s.sizes.width;e.clearRect(0,0,t,t),i(s.screens.mainCanvas,s.currentFrame.children[0])}()}},7:{icon:"/piskel/source/components/tools/icons/pen.svg",description:""}};function g(){s.frames.forEach((e,t)=>{const n=e.children[1].children[0];e.value=t,n.textContent=t+1})}function C(){if(event.target&&event.target.matches("button.frame-delete")){const e=event.target.parentElement.parentElement.value;1!==s.frames.length&&(s.frames[e].remove(),s.frames.splice(e,1),g())}}function E(){const e=event.target.parentElement.parentElement,t=e.value,n=w(t+2),a=s.frames.splice(t+1,s.frames.length-1);i(e.children[0],n.children[0]),e.after(n),s.frames.push(n),s.frames=s.frames.concat(a),g()}function w(e){const t=document.createElement("li");t.value=e-1;const n=document.createElement("canvas");n.classList.add("frames--items-canvas"),n.width=s.sizes.width,n.height=s.sizes.height;const a=document.createElement("div");a.classList.add("frames--items-controls");const o=document.createElement("button");o.classList.add("frame-number"),o.textContent=e;const c=document.createElement("button");c.classList.add("frame-delete");const r=document.createElement("img");c.addEventListener("click",C),c.appendChild(r);const l=document.createElement("button");l.classList.add("frame-drag_drop");const d=document.createElement("img");l.appendChild(d);const u=document.createElement("button");u.classList.add("frame-duplicate");const m=document.createElement("img");return u.appendChild(m),u.addEventListener("click",E),a.appendChild(o),a.appendChild(c),a.appendChild(l),a.appendChild(u),t.appendChild(n),t.appendChild(a),t.onmouseenter=()=>{c.style.opacity="1",l.style.opacity="1",u.style.opacity="1"},t.onmouseleave=()=>{c.style.opacity="0",l.style.opacity="0",u.style.opacity="0"},t.onclick=()=>{s.currentFrame!=t&&(s.currentFrame.classList.remove("current_frame"),t.classList.add("current_frame"),s.currentFrame=t,event.target==t.children[0]&&i(s.currentFrame.children[0],s.screens.mainCanvas))},t}function L(){const e=s.screens.previewCanvas;let t=s.frames,n=t.length,a=s.fps,i=1e3/a,o=0,c=Date.now();requestAnimationFrame((function r(){requestAnimationFrame(r);let l=Date.now(),d=l-c;d>i&&(c=l-d%i,t=s.frames,n=t.length,a=s.fps,i=1e3/a,t[o].children[0]&&(!function(e,t){const n=e.getContext("2d"),a=t.getContext("2d"),i=s.sizes.width,o=n.getImageData(0,0,i,i);a.putImageData(o,0,0)}(t[o].children[0],e),o++),o==n&&(o=0))}))}function y(){const e=event.target,t=e.value;if(s.currentSize!=e){s.currentSize.classList.remove("current"),e.classList.add("current"),s.sizes.width=t,s.sizes.height=t,s.currentSize=e,s.screens.mainCanvas.width=t,s.screens.mainCanvas.height=t,s.screens.previewCanvas.width=t,s.screens.previewCanvas.height=t;for(let e of s.frames){const n=e.children[0];n.width=t,n.height=t}}}function b(){const e=event.target,t=e.parentElement.parentElement;e.classList.contains("active")?(e.classList.remove("active"),t.style.width="50px"):(e.classList.add("active"),t.style.width="220px")}function k(){const e=document.createElement("div");e.classList.add("tools_palette"),e.appendChild(function(){const e=document.createElement("ul");e.classList.add("pen_size");for(let t=0;t<4;t++){const n=document.createElement("li");n.value=t+1,0==t&&(n.classList.add("active_size"),s.currentPenSize=n),n.addEventListener("click",()=>{s.pen.width=n.value,s.currentPenSize||(n.classList.add("active_size"),s.currentPenSize=n),s.currentPenSize.classList.remove("active_size"),n.classList.add("active_size"),s.currentPenSize=n}),e.appendChild(n)}return e}()),e.appendChild(function(){const e=document.createElement("ul");e.classList.add("tools"),s.tools=[];for(let t in h){const n=document.createElement("li"),a=document.createElement("img");a.src=h[t].icon,n.setAttribute("description",h[t].description),n.addEventListener("click",h[t].utils),"Trash"!==h[t].description&&n.addEventListener("click",()=>{s.currentTool||(n.classList.add("active_tool"),s.currentTool=n),s.currentTool.classList.remove("active_tool"),n.classList.add("active_tool"),s.currentTool=n}),n.appendChild(a),e.appendChild(n),s.tools.push(n)}return e}()),e.appendChild(function(){const e=document.createElement("div");e.classList.add("palette");const t=document.createElement("input");t.type="color",t.classList.add("current_color"),t.addEventListener("change",()=>{s.pen.colors.current=t.value});const n=document.createElement("input");n.type="color",n.classList.add("second_color"),n.value="#ff0000";const a=document.createElement("span");a.classList.add("change_color_icon"),a.addEventListener("click",()=>{s.pen.colors.current=n.value,s.pen.colors.second=t.value,t.value=s.pen.colors.current,n.value=s.pen.colors.second});const i=document.createElement("img");return i.src="./source/components/palette/arrows.svg",a.appendChild(i),e.appendChild(t),e.appendChild(n),e.appendChild(a),e}());const t=document.createElement("div");t.classList.add("left_side--container"),t.appendChild(e),t.appendChild(function(){const e=document.createElement("div");e.classList.add("frames");const t=document.createElement("ul");t.classList.add("frames--items");const n=w(1);n.classList.add("current_frame"),s.currentFrame=n,s.frames=[],s.frames.push(n),t.appendChild(n);const a=document.createElement("button");return a.classList.add("frames--add_new_frame"),a.textContent="Add new frame",a.addEventListener("click",()=>{const e=w(s.frames.length+1);s.frames.push(e),t.appendChild(e)}),e.appendChild(t),e.appendChild(a),e}());const n=document.createElement("div");n.classList.add("middle--container"),n.appendChild(function(){const e=document.createElement("canvas");return e.id="main_canvas",e.width=s.sizes.width,e.height=s.sizes.height,s.screens.mainCanvas=e,e}());const a=document.createElement("div");a.classList.add("right_side--container"),a.appendChild(function(){const e=document.createElement("canvas");return e.id="preview_canvas",e.width=s.sizes.width,e.height=s.sizes.height,e.addEventListener("click",()=>{e.requestFullscreen()}),s.screens.previewCanvas=e,L(),e}()),a.appendChild(function(){const e=document.createElement("div");e.classList.add("frame_fps");const t=document.createElement("span");t.classList.add("counter_fps"),t.textContent=s.fps+" FPS";const n=document.createElement("input");return n.type="range",n.min="1",n.max="24",n.value=s.fps,n.oninput=()=>{t.textContent=n.value+" FPS",s.fps=n.value},e.appendChild(t),e.appendChild(n),e}());const i=document.createElement("div");i.classList.add("settings--container"),i.appendChild(function(){const e=document.createElement("div");e.classList.add("settings");const t=document.createElement("button");t.classList.add("settings--icon"),t.addEventListener("click",b);const n=document.createElement("div");n.classList.add("settings--canvas_size");const a=document.createElement("div");a.classList.add("settings--canvas_size-title"),a.textContent="Canvas sizes";const i=document.createElement("ul");i.classList.add("settings--canvas_size-list_sizes");const o=document.createElement("li");o.value=32,o.textContent="32x32",o.addEventListener("click",y),o.classList.add("current"),s.currentSize=o;const c=document.createElement("li");c.value=64,c.textContent="64x64",c.addEventListener("click",y);const r=document.createElement("li");return r.value=128,r.textContent="128x128",r.addEventListener("click",y),i.appendChild(o),i.appendChild(c),i.appendChild(r),n.appendChild(a),n.appendChild(i),e.appendChild(t),e.appendChild(n),e}());const o=document.createElement("main");return o.appendChild(t),o.appendChild(n),o.appendChild(a),o.appendChild(i),o}!function(){const e=document.createDocumentFragment(),t=function(){const e=document.createElement("header");return e.innerHTML='<div class="label">\n                            Piskel\n                        </div>\n                        <div class="file_name">\n                            New piskel*\n                        </div>\n                        <div class="navigation_buttons">\n                            <button>Sing up</button>\n                            <button>Sing in</button>\n                        </div>',e}(),n=function(){const e=document.createElement("div");return e.classList.add("main_present"),e.innerHTML='<div class="preview">\n        <div class="information">\n            <div class="information--title">Piskel is a free online editor for animated sprites & pixel art</div>\n            <div class="information-description">Try an example or simply create a new sprite.</div>\n            <div class="information--buttons">\n                <button>Sing in</button>\n                <button class="initProject">Create Sprite</button>\n            </div>\n        </div>\n        <div class="screenshot">\n            <img src="./source/layouts/mainPresent/animations/srceenshot.png" alt="screenshot">\n            <img src="./source/layouts/mainPresent/animations/rotor.gif" alt="rotor" class="rotor">\n        </div>\n    </div>\n</div>\n\n<div class="examples">\n    <div class="examples--title">Example sprites</div>\n    <ul class="examples--list">\n        <li>\n            <a href="https://www.piskelapp.com/p/agxzfnBpc2tlbC1hcHByEwsSBlBpc2tlbBiAgICAyJ2kCQw/edit">\n                <img src="./source/layouts/mainPresent/animations/megaman.gif" alt="megaman">\n            </a>\n        </li>\n        <li>\n            <a href="https://www.piskelapp.com/p/agxzfnBpc2tlbC1hcHByEwsSBlBpc2tlbBiAgICA_eOjCgw/edit">\n                <img src="./source/layouts/mainPresent/animations/mix.gif" alt="mix">\n            </a>\n        </li>\n        <li>\n            <a href="https://www.piskelapp.com/p/agxzfnBpc2tlbC1hcHByEwsSBlBpc2tlbBiAgICfx5ygCQw/edit">\n                <img src="./source/layouts/mainPresent/animations/llama.gif" alt="llama">\n            </a>\n        </li>\n        <li>\n            <a href="https://www.piskelapp.com/p/agxzfnBpc2tlbC1hcHByEwsSBlBpc2tlbBiAgIDfmPWVCww/edit">\n                <img src="./source/layouts/mainPresent/animations/snakes.gif" alt="snakes">\n            </a>\n        </li>\n        <li>\n            <a href="https://www.piskelapp.com/p/agxzfnBpc2tlbC1hcHByEwsSBlBpc2tlbBiAgICwuvn-Cgw/edit">\n                <img src="./source/layouts/mainPresent/animations/stormtrooper.gif" alt="stormtrooper">\n            </a>\n        </li>\n        <li>\n            <a href="https://www.piskelapp.com/p/agxzfnBpc2tlbC1hcHByEwsSBlBpc2tlbBiAgICf1u3kCAw/edit">\n                <img src="./source/layouts/mainPresent/animations/panda.gif" alt="panda">\n            </a>\n        </li>\n    </ul>\n</div>',e}();k().style.display="none";const s=function(){const e=document.createElement("footer");return e.innerHTML='<div class="footer--description">\n                                Created by <a href="https://github.com/Lansyfonseka">\n                                    <img src="/piskel/source/layouts/mainPresent/animations/github.svg" alt="github">\n                                    Lansyfonseka\n                                </a>\n                            </div>\n                            <div class="footer--icon">Piskel</div>',e}();e.appendChild(t),e.appendChild(n),e.appendChild(s),document.body.appendChild(e),function(){const e=document.querySelector(".initProject"),t=document.querySelector(".label"),n=document.querySelector(".main_present"),s=document.querySelector("main");e.addEventListener("click",()=>{n.style.display="none",s.style.display="grid"}),t.addEventListener("click",()=>{n.style.display="block",s.style.display="none"})}()}()},function(e,t){}]);